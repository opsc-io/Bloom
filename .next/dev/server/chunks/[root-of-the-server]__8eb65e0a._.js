module.exports = [
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[externals]/util [external] (util, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("util", () => require("util"));

module.exports = mod;
}),
"[externals]/url [external] (url, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("url", () => require("url"));

module.exports = mod;
}),
"[externals]/http [external] (http, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}),
"[externals]/crypto [external] (crypto, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}),
"[externals]/assert [external] (assert, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("assert", () => require("assert"));

module.exports = mod;
}),
"[externals]/querystring [external] (querystring, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("querystring", () => require("querystring"));

module.exports = mod;
}),
"[externals]/buffer [external] (buffer, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("buffer", () => require("buffer"));

module.exports = mod;
}),
"[externals]/zlib [external] (zlib, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("zlib", () => require("zlib"));

module.exports = mod;
}),
"[externals]/https [external] (https, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}),
"[externals]/events [external] (events, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("events", () => require("events"));

module.exports = mod;
}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}),
"[externals]/fs [external] (fs, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}),
"[externals]/path [external] (path, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("path", () => require("path"));

module.exports = mod;
}),
"[externals]/os [external] (os, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("os", () => require("os"));

module.exports = mod;
}),
"[externals]/stream [external] (stream, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}),
"[externals]/pg [external] (pg, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("pg", () => require("pg"));

module.exports = mod;
}),
"[externals]/net [external] (net, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("net", () => require("net"));

module.exports = mod;
}),
"[externals]/tls [external] (tls, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("tls", () => require("tls"));

module.exports = mod;
}),
"[externals]/string_decoder [external] (string_decoder, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("string_decoder", () => require("string_decoder"));

module.exports = mod;
}),
"[externals]/tty [external] (tty, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("tty", () => require("tty"));

module.exports = mod;
}),
"[externals]/dns [external] (dns, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("dns", () => require("dns"));

module.exports = mod;
}),
"[externals]/module [external] (module, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("module", () => require("module"));

module.exports = mod;
}),
"[externals]/fs/promises [external] (fs/promises, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("fs/promises", () => require("fs/promises"));

module.exports = mod;
}),
"[externals]/node:util [external] (node:util, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:util", () => require("node:util"));

module.exports = mod;
}),
"[externals]/node:url [external] (node:url, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:url", () => require("node:url"));

module.exports = mod;
}),
"[externals]/node:path [external] (node:path, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:path", () => require("node:path"));

module.exports = mod;
}),
"[externals]/node:fs [external] (node:fs, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:fs", () => require("node:fs"));

module.exports = mod;
}),
"[externals]/node:fs/promises [external] (node:fs/promises, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:fs/promises", () => require("node:fs/promises"));

module.exports = mod;
}),
"[externals]/node:events [external] (node:events, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:events", () => require("node:events"));

module.exports = mod;
}),
"[externals]/node:stream [external] (node:stream, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:stream", () => require("node:stream"));

module.exports = mod;
}),
"[externals]/node:string_decoder [external] (node:string_decoder, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("node:string_decoder", () => require("node:string_decoder"));

module.exports = mod;
}),
"[project]/src/db/entities/Role.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Role",
    ()=>Role
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__ = __turbopack_context__.i("[project]/node_modules/tslib/tslib.es6.mjs [app-route] (ecmascript) <export __decorate as _>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__ = __turbopack_context__.i("[project]/node_modules/tslib/tslib.es6.mjs [app-route] (ecmascript) <export __metadata as _>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/typeorm/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$UserRole$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/UserRole.ts [app-route] (ecmascript)");
;
;
;
;
class Role {
    role_id;
    name;
    userRoles;
}
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PrimaryGeneratedColumn"])(),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", Number)
], Role.prototype, "role_id", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Column"])({
        length: 50,
        unique: true
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", String)
], Role.prototype, "name", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["OneToMany"])(()=>__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$UserRole$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["UserRole"], (userRole)=>userRole.role),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", Array)
], Role.prototype, "userRoles", void 0);
Role = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Entity"])('roles')
], Role);
}),
"[project]/src/db/entities/UserRole.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "UserRole",
    ()=>UserRole
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__ = __turbopack_context__.i("[project]/node_modules/tslib/tslib.es6.mjs [app-route] (ecmascript) <export __decorate as _>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__ = __turbopack_context__.i("[project]/node_modules/tslib/tslib.es6.mjs [app-route] (ecmascript) <export __metadata as _>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/typeorm/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/User.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$Role$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/Role.ts [app-route] (ecmascript)");
;
;
;
;
;
class UserRole {
    user_id;
    role_id;
    user;
    role;
}
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PrimaryColumn"])('uuid'),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", String)
], UserRole.prototype, "user_id", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PrimaryColumn"])(),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", Number)
], UserRole.prototype, "role_id", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ManyToOne"])(()=>__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"], (user)=>user.userRoles),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", typeof __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"] === "undefined" ? Object : __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"])
], UserRole.prototype, "user", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ManyToOne"])(()=>__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$Role$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Role"], (role)=>role.userRoles),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", typeof __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$Role$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Role"] === "undefined" ? Object : __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$Role$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Role"])
], UserRole.prototype, "role", void 0);
UserRole = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Entity"])('user_roles')
], UserRole);
}),
"[project]/src/db/entities/User.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "User",
    ()=>User
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__ = __turbopack_context__.i("[project]/node_modules/tslib/tslib.es6.mjs [app-route] (ecmascript) <export __decorate as _>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__ = __turbopack_context__.i("[project]/node_modules/tslib/tslib.es6.mjs [app-route] (ecmascript) <export __metadata as _>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/typeorm/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$UserRole$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/UserRole.ts [app-route] (ecmascript)");
;
;
;
;
class User {
    user_id;
    email;
    // Store the password hash for traditional email/password auth.
    // Use snake_case column name `password_hash` to match common DB conventions.
    password_hash;
    passkey_credential;
    mfa_secret;
    created_at;
    last_login;
    is_active;
    userRoles;
}
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PrimaryGeneratedColumn"])('uuid'),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", String)
], User.prototype, "user_id", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Column"])({
        type: 'citext',
        unique: true
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", String)
], User.prototype, "email", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Column"])({
        name: 'password_hash',
        nullable: true
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", String)
], User.prototype, "password_hash", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Column"])({
        type: 'jsonb',
        nullable: true
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", Object)
], User.prototype, "passkey_credential", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Column"])({
        nullable: true
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", String)
], User.prototype, "mfa_secret", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CreateDateColumn"])(),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", typeof Date === "undefined" ? Object : Date)
], User.prototype, "created_at", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Column"])({
        type: 'timestamptz',
        nullable: true
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", typeof Date === "undefined" ? Object : Date)
], User.prototype, "last_login", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Column"])({
        default: true
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", Boolean)
], User.prototype, "is_active", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["OneToMany"])(()=>__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$UserRole$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["UserRole"], (userRole)=>userRole.user),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", Array)
], User.prototype, "userRoles", void 0);
User = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Entity"])('users')
], User);
}),
"[project]/src/db/entities/Provider.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Provider",
    ()=>Provider
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__ = __turbopack_context__.i("[project]/node_modules/tslib/tslib.es6.mjs [app-route] (ecmascript) <export __decorate as _>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__ = __turbopack_context__.i("[project]/node_modules/tslib/tslib.es6.mjs [app-route] (ecmascript) <export __metadata as _>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/typeorm/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/User.ts [app-route] (ecmascript)");
;
;
;
;
class Provider {
    user_id;
    npi_number;
    license_verification_status;
    credentialing_package_id;
    user;
}
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PrimaryColumn"])('uuid'),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", String)
], Provider.prototype, "user_id", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Column"])({
        length: 10,
        unique: true,
        nullable: true
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", String)
], Provider.prototype, "npi_number", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Column"])({
        type: 'varchar',
        length: 20,
        default: 'pending'
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", String)
], Provider.prototype, "license_verification_status", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Column"])({
        type: 'uuid',
        nullable: true
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", String)
], Provider.prototype, "credentialing_package_id", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["OneToOne"])(()=>__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"]),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["JoinColumn"])({
        name: 'user_id'
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", typeof __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"] === "undefined" ? Object : __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"])
], Provider.prototype, "user", void 0);
Provider = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Entity"])('providers')
], Provider);
}),
"[project]/src/db/entities/Client.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Client",
    ()=>Client
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__ = __turbopack_context__.i("[project]/node_modules/tslib/tslib.es6.mjs [app-route] (ecmascript) <export __decorate as _>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__ = __turbopack_context__.i("[project]/node_modules/tslib/tslib.es6.mjs [app-route] (ecmascript) <export __metadata as _>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/typeorm/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/User.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$Provider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/Provider.ts [app-route] (ecmascript)");
;
;
;
;
;
class Client {
    user_id;
    primary_therapist;
    insurance_id;
    emergency_contact;
    user;
    provider;
}
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PrimaryColumn"])('uuid'),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", String)
], Client.prototype, "user_id", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Column"])('uuid', {
        nullable: true
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", String)
], Client.prototype, "primary_therapist", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Column"])({
        length: 50,
        nullable: true
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", String)
], Client.prototype, "insurance_id", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Column"])({
        type: 'jsonb',
        nullable: true
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", Object)
], Client.prototype, "emergency_contact", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["OneToOne"])(()=>__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"]),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["JoinColumn"])({
        name: 'user_id'
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", typeof __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"] === "undefined" ? Object : __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"])
], Client.prototype, "user", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ManyToOne"])(()=>__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$Provider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Provider"]),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["JoinColumn"])({
        name: 'primary_therapist'
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", typeof __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$Provider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Provider"] === "undefined" ? Object : __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$Provider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Provider"])
], Client.prototype, "provider", void 0);
Client = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Entity"])('clients')
], Client);
}),
"[project]/src/db/entities/UserProvider.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "UserProvider",
    ()=>UserProvider
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__ = __turbopack_context__.i("[project]/node_modules/tslib/tslib.es6.mjs [app-route] (ecmascript) <export __decorate as _>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__ = __turbopack_context__.i("[project]/node_modules/tslib/tslib.es6.mjs [app-route] (ecmascript) <export __metadata as _>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/typeorm/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/User.ts [app-route] (ecmascript)");
;
;
;
;
class UserProvider {
    id;
    user_id;
    provider;
    provider_user_id;
    provider_data;
    created_at;
    user;
}
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PrimaryGeneratedColumn"])('uuid'),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", String)
], UserProvider.prototype, "id", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Column"])('uuid'),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", String)
], UserProvider.prototype, "user_id", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Column"])({
        length: 50
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", String)
], UserProvider.prototype, "provider", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Column"])({
        length: 200
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", String)
], UserProvider.prototype, "provider_user_id", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Column"])({
        type: 'jsonb',
        nullable: true
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", Object)
], UserProvider.prototype, "provider_data", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CreateDateColumn"])(),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", typeof Date === "undefined" ? Object : Date)
], UserProvider.prototype, "created_at", void 0);
(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ManyToOne"])(()=>__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"]),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["JoinColumn"])({
        name: 'user_id'
    }),
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_metadata__as__$5f3e$__["_"])("design:type", typeof __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"] === "undefined" ? Object : __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"])
], UserProvider.prototype, "user", void 0);
UserProvider = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tslib$2f$tslib$2e$es6$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$5f$_decorate__as__$5f3e$__["_"])([
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Entity"])('user_providers')
], UserProvider);
}),
"[project]/src/migrations/001AddPasswordHash.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "AddPasswordHash001",
    ()=>AddPasswordHash001,
    "default",
    ()=>__TURBOPACK__default__export__
]);
class AddPasswordHash001 {
    name = 'AddPasswordHash001';
    async up(queryRunner) {
        // Add a nullable password_hash column compatible with Postgres/CockroachDB
        await queryRunner.query(`ALTER TABLE IF EXISTS users ADD COLUMN IF NOT EXISTS password_hash VARCHAR;`);
    }
    async down(queryRunner) {
        await queryRunner.query(`ALTER TABLE IF EXISTS users DROP COLUMN IF EXISTS password_hash;`);
    }
}
const __TURBOPACK__default__export__ = AddPasswordHash001;
}),
"[project]/src/migrations/002ConvertEmailToVarchar.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "ConvertEmailToVarchar002",
    ()=>ConvertEmailToVarchar002,
    "default",
    ()=>__TURBOPACK__default__export__
]);
class ConvertEmailToVarchar002 {
    name = 'ConvertEmailToVarchar002';
    async up(queryRunner) {
        // Create a temporary column and populate with lower(email)
        await queryRunner.query(`ALTER TABLE IF EXISTS users ADD COLUMN IF NOT EXISTS email_new VARCHAR;`);
        await queryRunner.query(`UPDATE users SET email_new = lower(CAST(email AS text));`);
        // Drop old column and rename
        await queryRunner.query(`ALTER TABLE users DROP COLUMN IF EXISTS email;`);
        await queryRunner.query(`ALTER TABLE users RENAME COLUMN email_new TO email;`);
        // Create a case-insensitive unique index on lower(email)
        // Use IF NOT EXISTS for idempotency
        await queryRunner.query(`CREATE UNIQUE INDEX IF NOT EXISTS uniq_users_email_lower ON users ((lower(email)));`);
    }
    async down(queryRunner) {
        // Attempt to restore previous state is non-trivial; as a safe rollback, drop the index
        await queryRunner.query(`DROP INDEX IF EXISTS uniq_users_email_lower;`);
    }
}
const __TURBOPACK__default__export__ = ConvertEmailToVarchar002;
}),
"[project]/src/migrations/003CreateUserProviders.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "CreateUserProviders003",
    ()=>CreateUserProviders003,
    "default",
    ()=>__TURBOPACK__default__export__
]);
class CreateUserProviders003 {
    name = 'CreateUserProviders003';
    async up(queryRunner) {
        // Create table user_providers compatible with Postgres/CockroachDB
        await queryRunner.query(`
      CREATE TABLE IF NOT EXISTS user_providers (
        id UUID PRIMARY KEY,
        user_id UUID NOT NULL,
        provider VARCHAR(50) NOT NULL,
        provider_user_id VARCHAR(200) NOT NULL,
        provider_data JSONB,
        created_at TIMESTAMPTZ DEFAULT now(),
        CONSTRAINT fk_user FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE
      );
    `);
        await queryRunner.query(`CREATE UNIQUE INDEX IF NOT EXISTS uniq_user_providers_provider_user ON user_providers (provider, provider_user_id);`);
    }
    async down(queryRunner) {
        await queryRunner.query(`DROP INDEX IF EXISTS uniq_user_providers_provider_user;`);
        await queryRunner.query(`DROP TABLE IF EXISTS user_providers;`);
    }
}
const __TURBOPACK__default__export__ = CreateUserProviders003;
}),
"[project]/src/config.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

// Centralized configuration values. Keep minimal here and read from environment
__turbopack_context__.s([
    "IS_DEV",
    ()=>IS_DEV,
    "ORIGIN",
    ()=>ORIGIN,
    "RP_ID",
    ()=>RP_ID
]);
const RP_ID = process.env.RP_ID || 'localhost';
const ORIGIN = process.env.ORIGIN || 'http://localhost:3000';
const IS_DEV = (("TURBOPACK compile-time value", "development") || 'development') === 'development';
}),
"[project]/src/db/data-source.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "AppDataSource",
    ()=>AppDataSource
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/typeorm/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/User.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$Role$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/Role.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$UserRole$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/UserRole.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$Provider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/Provider.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$Client$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/Client.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$UserProvider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/UserProvider.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$migrations$2f$001AddPasswordHash$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/migrations/001AddPasswordHash.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$migrations$2f$002ConvertEmailToVarchar$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/migrations/002ConvertEmailToVarchar.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$migrations$2f$003CreateUserProviders$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/migrations/003CreateUserProviders.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$config$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/config.ts [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
const DB_HOST = process.env.DB_HOST || 'localhost';
const DB_PORT = parseInt(process.env.DB_PORT || '5432', 10);
const DB_USER = process.env.DB_USER || 'postgres';
const DB_PASS = process.env.DB_PASS || 'postgres';
const DB_NAME = process.env.DB_NAME || 'therapy_platform';
const AppDataSource = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$typeorm$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["DataSource"]({
    type: "postgres",
    host: DB_HOST,
    port: DB_PORT,
    username: DB_USER,
    password: DB_PASS,
    database: DB_NAME,
    // Use synchronize only in development. Use migrations for production.
    synchronize: __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$config$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["IS_DEV"],
    logging: __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$config$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["IS_DEV"],
    entities: [
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"],
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$Role$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Role"],
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$UserRole$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["UserRole"],
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$Provider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Provider"],
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$Client$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Client"],
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$UserProvider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["UserProvider"]
    ],
    subscribers: [],
    migrations: [
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$migrations$2f$001AddPasswordHash$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"],
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$migrations$2f$002ConvertEmailToVarchar$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"],
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$migrations$2f$003CreateUserProviders$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"]
    ]
});
}),
"[project]/src/services/userService.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Small user service helpers to find users and update credentials.
 */ __turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__,
    "findUserByEmail",
    ()=>findUserByEmail,
    "findUserById",
    ()=>findUserById
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/data-source.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/User.ts [app-route] (ecmascript)");
;
;
async function findUserByEmail(email) {
    if (!__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].isInitialized) await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].initialize();
    const repo = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].getRepository(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"]);
    return repo.findOneBy({
        email
    });
}
async function findUserById(userId) {
    if (!__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].isInitialized) await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].initialize();
    const repo = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].getRepository(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"]);
    return repo.findOneBy({
        user_id: userId
    });
}
const __TURBOPACK__default__export__ = {
    findUserByEmail,
    findUserById
};
}),
"[externals]/bcrypt [external] (bcrypt, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("bcrypt", () => require("bcrypt"));

module.exports = mod;
}),
"[project]/src/lib/jwt.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Small JWT helper using jsonwebtoken. Exposes sign and verify helpers.
 */ __turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__,
    "signJwt",
    ()=>signJwt,
    "verifyJwt",
    ()=>verifyJwt
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jsonwebtoken$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/jsonwebtoken/index.js [app-route] (ecmascript)");
;
const JWT_SECRET = process.env.JWT_SECRET || 'dev-secret-change-me';
const JWT_EXPIRES_IN = process.env.JWT_EXPIRES_IN || '7d';
function signJwt(payload) {
    if ("TURBOPACK compile-time falsy", 0) //TURBOPACK unreachable
    ;
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jsonwebtoken$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].sign(payload, JWT_SECRET, {
        expiresIn: JWT_EXPIRES_IN
    });
}
function verifyJwt(token) {
    try {
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$jsonwebtoken$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"].verify(token, JWT_SECRET);
    } catch (err) {
        return null;
    }
}
const __TURBOPACK__default__export__ = {
    signJwt,
    verifyJwt
};
}),
"[project]/src/services/authService.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Authentication service responsible for user creation and login.
 * - Supports roles: 'provider', 'client', 'admin'
 * - Uses bcrypt for password hashing and jsonwebtoken for tokens.
 *
 * The exported functions are intentionally small and well-documented to
 * facilitate unit testing (they avoid tight coupling to global AppDataSource
 * where possible).
 */ __turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__,
    "login",
    ()=>login,
    "signup",
    ()=>signup
]);
var __TURBOPACK__imported__module__$5b$externals$5d2f$bcrypt__$5b$external$5d$__$28$bcrypt$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/bcrypt [external] (bcrypt, cjs)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$jwt$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/jwt.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/data-source.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/User.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$Role$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/Role.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$UserRole$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/UserRole.ts [app-route] (ecmascript)");
;
;
;
;
;
;
async function signup(payload) {
    const { email, password, accountType } = payload;
    // Initialize data source lazily if needed
    if (!__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].isInitialized) await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].initialize();
    const userRepo = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].getRepository(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"]);
    const roleRepo = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].getRepository(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$Role$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Role"]);
    const userRoleRepo = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].getRepository(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$UserRole$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["UserRole"]);
    const existing = await userRepo.findOneBy({
        email
    });
    if (existing) throw new Error('Email already registered');
    const user = new __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"]();
    user.email = email;
    if (password) {
        const salt = await __TURBOPACK__imported__module__$5b$externals$5d2f$bcrypt__$5b$external$5d$__$28$bcrypt$2c$__cjs$29$__["default"].genSalt(10);
        user.password_hash = await __TURBOPACK__imported__module__$5b$externals$5d2f$bcrypt__$5b$external$5d$__$28$bcrypt$2c$__cjs$29$__["default"].hash(password, salt);
    }
    user.is_active = true;
    await userRepo.save(user);
    // Find or create role
    let role = await roleRepo.findOneBy({
        name: accountType
    });
    if (!role) {
        role = new __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$Role$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["Role"]();
        role.name = accountType;
        await roleRepo.save(role);
    }
    const userRole = new __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$UserRole$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["UserRole"]();
    userRole.user_id = user.user_id;
    userRole.role_id = role.role_id;
    await userRoleRepo.save(userRole);
    // For security, don't return passwordHash
    const out = {
        ...user
    };
    delete out.passwordHash;
    return out;
}
async function login(email, password) {
    if (!__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].isInitialized) await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].initialize();
    const userRepo = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].getRepository(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$User$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["User"]);
    const user = await userRepo.findOneBy({
        email
    });
    if (!user) throw new Error('Invalid credentials');
    // Passwords are optional if passkey-only auth is used; require a hash for password login
    const passwordHash = user.password_hash ?? user.passwordHash;
    if (!passwordHash) throw new Error('Password login not available for this account');
    const ok = await __TURBOPACK__imported__module__$5b$externals$5d2f$bcrypt__$5b$external$5d$__$28$bcrypt$2c$__cjs$29$__["default"].compare(password, passwordHash);
    if (!ok) throw new Error('Invalid credentials');
    // Issue JWT with minimal claims
    const token = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$jwt$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["signJwt"])({
        sub: user.user_id,
        email: user.email
    });
    return {
        token,
        user
    };
}
const __TURBOPACK__default__export__ = {
    signup,
    login
};
}),
"[project]/src/services/providerService.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * Provider service: manages OAuth provider link rows (user_providers table).
 */ __turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__,
    "linkProvider",
    ()=>linkProvider,
    "listProviders",
    ()=>listProviders,
    "unlinkProvider",
    ()=>unlinkProvider
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/data-source.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$UserProvider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/db/entities/UserProvider.ts [app-route] (ecmascript)");
;
;
async function linkProvider(userId, provider, providerUserId, providerData) {
    if (!__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].isInitialized) await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].initialize();
    const repo = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].getRepository(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$UserProvider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["UserProvider"]);
    // Try to find an existing link
    let existing = await repo.findOneBy({
        provider,
        provider_user_id: providerUserId
    });
    if (existing) {
        // If it exists but is attached to a different user, re-attach or throw depending on policy.
        if (existing.user_id !== userId) {
            existing.user_id = userId;
            existing.provider_data = providerData;
            await repo.save(existing);
        }
        return existing;
    }
    const link = new __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$UserProvider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["UserProvider"]();
    link.user_id = userId;
    link.provider = provider;
    link.provider_user_id = providerUserId;
    link.provider_data = providerData;
    return repo.save(link);
}
const __TURBOPACK__default__export__ = {
    linkProvider
};
async function listProviders(userId) {
    if (!__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].isInitialized) await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].initialize();
    const repo = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].getRepository(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$UserProvider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["UserProvider"]);
    return repo.find({
        where: {
            user_id: userId
        },
        order: {
            created_at: 'DESC'
        }
    });
}
async function unlinkProvider(id) {
    if (!__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].isInitialized) await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].initialize();
    const repo = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$data$2d$source$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["AppDataSource"].getRepository(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$db$2f$entities$2f$UserProvider$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["UserProvider"]);
    const rec = await repo.findOneBy({
        id
    });
    if (!rec) throw new Error('Provider link not found');
    await repo.remove(rec);
    return true;
}
}),
"[project]/src/auth/nextAuthOptions.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "authOptions",
    ()=>authOptions,
    "default",
    ()=>__TURBOPACK__default__export__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2d$auth$2f$providers$2f$google$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next-auth/providers/google.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2d$auth$2f$providers$2f$facebook$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next-auth/providers/facebook.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2d$auth$2f$providers$2f$credentials$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next-auth/providers/credentials.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$userService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/services/userService.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$authService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/services/authService.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$providerService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/services/providerService.ts [app-route] (ecmascript)");
;
;
;
;
;
;
const authOptions = {
    providers: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2d$auth$2f$providers$2f$credentials$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"])({
            name: 'Credentials',
            credentials: {
                email: {
                    label: 'Email',
                    type: 'text'
                },
                password: {
                    label: 'Password',
                    type: 'password'
                }
            },
            async authorize (credentials) {
                if (!credentials) return null;
                try {
                    const { email, password } = credentials;
                    const res = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$authService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["login"])(email, password);
                    // login returns { token, user }
                    return res.user;
                } catch (err) {
                    return null;
                }
            }
        }),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2d$auth$2f$providers$2f$google$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"])({
            clientId: process.env.GOOGLE_CLIENT_ID || '',
            clientSecret: process.env.GOOGLE_CLIENT_SECRET || ''
        }),
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2d$auth$2f$providers$2f$facebook$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"])({
            clientId: process.env.FACEBOOK_CLIENT_ID || '',
            clientSecret: process.env.FACEBOOK_CLIENT_SECRET || ''
        })
    ],
    secret: process.env.NEXTAUTH_SECRET || process.env.JWT_SECRET || 'dev-nextauth-secret',
    session: {
        strategy: 'jwt'
    },
    callbacks: {
        async signIn ({ user, account, profile }) {
            try {
                // When signing in via OAuth providers, ensure user exists and link provider
                if (account && account.provider) {
                    let existing = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$userService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findUserByEmail"])(user.email);
                    if (!existing) {
                        existing = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$authService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["signup"])({
                            email: user.email,
                            accountType: 'client'
                        });
                    }
                    try {
                        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$services$2f$providerService$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["linkProvider"])(existing.user_id, account.provider, account.providerAccountId, {
                            profile,
                            account
                        });
                    } catch (e) {
                        console.warn('provider link failed:', e);
                    }
                }
                return true;
            } catch (err) {
                console.error('NextAuth signIn callback error:', err);
                return false;
            }
        },
        async jwt ({ token, user }) {
            // Attach user id to token for session
            if (user && user.user_id) {
                token.sub = user.user_id;
            }
            return token;
        },
        async session ({ session, token }) {
            session.user = {
                ...session.user,
                user_id: token.sub
            };
            return session;
        }
    }
};
const __TURBOPACK__default__export__ = authOptions;
}),
"[project]/app/api/auth/[...nextauth]/route.ts [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

/**
 * NextAuth route for OAuth sign-in (Google + Facebook).
 *
 * This file uses NextAuth in the App Router (route handler). It implements a
 * signIn callback that finds or creates a user in our application's DB via
 * the existing authService. New OAuth signups default to the `client` role 
 * you can later implement an admin approval flow or provider-specific logic.
 */ __turbopack_context__.s([
    "GET",
    ()=>handler,
    "POST",
    ()=>handler
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2d$auth$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next-auth/index.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$auth$2f$nextAuthOptions$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/auth/nextAuthOptions.ts [app-route] (ecmascript)");
;
;
const handler = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2d$auth$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$auth$2f$nextAuthOptions$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"]);
;
}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__8eb65e0a._.js.map